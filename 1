#include<stdio.h>
#include<stdlib.h>
#include<math.h>


typedef struct{
float x;
float y;
}POINT;

typedef struct{
POINT p;
float r;
}CIRCLE;

typedef struct{
float a;
float b;
float c;
}LINE;

char circ_circ_inner_tangents(CIRCLE *c1, CIRCLE *c2, LINE *t1, LINE *t2){
	float d, r, vx, vy, bodx, body, q, bod1x, bod2x, bod3x, bod4x, q2, bod1y, bod2y, bod3y, bod4y;
	d = sqrt(pow((c1->p.x-c2->p.x),2)+pow((c1->p.y-c2->p.y),2));
	r = c1->r+c2->r;
	if (d<r) {
	return 0;
	};
	if (d==r) {
	vx = (c2->p.x-c1->p.x)/d;
	vy = (c2->p.y-c1->p.y)/d; 	
	bodx = c1->p.x + vx*c1->r;
	body = c1->p.y + vy*c1->r;
	t1->a = vx;	
	t1->b = vy;	
	t1->c = -bodx*t1->a-body*t1->b;	
	return 1;
	};
	if (d>r) {
	q = atan2(c2->p.y-c1->p.y, c2->p.x-c1->p.x)+asin(r/d)-M_PI/2;
	bod1x = c1->p.x + cos(q)*c1->r;
	bod1y = c1->p.y + sin(q)*c1->r;
	bod2x = c2->p.x + cos(q+M_PI)*c2->r;
	bod2y = c2->p.y + sin(q+M_PI)*c2->r;
		t1->a = bod2y-bod1y; 	
		t1->b = bod1x-bod2x;	
		t1->c = -bod1x*t1->a-bod1y*t1->b;	
	q2 = atan2(c2->p.y-c1->p.y, c2->p.x-c1->p.x)-asin(r/d)+M_PI/2;
	bod3x = c1->p.x + cos(q2)*c1->r;
	bod3y = c1->p.y + sin(q2)*c1->r;
	bod4x = c2->p.x + cos(q2+M_PI)*c2->r;
	bod4y = c2->p.y + sin(q2+M_PI)*c2->r;
		t2->a = bod4y-bod3y;	
		t2->b = bod3x-bod4x;	
		t2->c = -bod3x*t2->a-bod3y*t2->b;	
	return 2;
	}
	
	
}

int main(){
	float x1, x2, y1, y2, r1, r2;
	puts("Zadajte x-ovu a y-ovu suradnice stredu a priemer 1 kruznice");
		scanf("%f %f %f", &x1, &y1, &r1);
	puts("Zadajte x-ovu a y-ovu suradnice stredu a priemer 2 kruznice");
		scanf("%f %f %f", &x2, &y2, &r2);	
	POINT p1 = {x1, y1};
	CIRCLE c1 = {p1, r1};
	POINT p2 = {x2, y2};
	CIRCLE c2 = {p2, r2};
	LINE t1, t2;
	char result = circ_circ_inner_tangents(&c1, &c2, &t1, &t2);
	switch (result){
		case 0:
    		puts("neexistuju vnutorne dotycnice");
    		break;
 	    case 1:
 			puts("existuje jedna vnutorna dotycnica");
 			printf("Rovnica: %0.2fx%+-0.2fy%+-0.2f=0\n", t1.a, t1.b, t1.c);
 		    break;
 		case 2:
			puts("existuju dve vnutorne dotycnice");
 			printf("Rovnica 1: %0.2fx%+-0.2fy%+-0.2f=0\n", t1.a, t1.b, t1.c);
 		    printf("Rovnica 2: %0.2fx%+-0.2fy%+-0.2f=0\n", t2.a, t2.b, t2.c);
    		break;
	};
return 0;
}
